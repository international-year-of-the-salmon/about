---
title: "Data Products"
output:
 html_document:
   code_folding: hide
   number_sections: true
---

Here you will find a number of derived data products related to the IYS. 

# Maps {.tabset}

If you click 'code' you can see the R code used to produce these plots. Feel free to copy the code and make edits yourself or contact brett.johnson@hakai.org for changes.

## 2022 Trawl Station Map Blue Bathymetry

```{r, warning = FALSE, message=FALSE, cache = TRUE, out.width = "100%", out.height = "100%"}
library(ggOceanMaps)
library(tidyverse)

# Edit which vessels, years, or sampling event types you would like to plot
vessel <- c("TINRO", "NW", "Shimada", "Franklin", "Kaganovsky", "Legacy", "Raw_Spirit")
sampling_year <- c(2022)
#event_types could include "Trawl", "CTD" or "CTD-Rosette", "Gillnet"
event_types <- c("Trawl", "Gillnet")

# Update IYS_events.csv with newest version from https://github.com/international-year-of-the-salmon/IYS-Integrated-Data-Collection
iys_data <- read_csv("https://raw.githubusercontent.com/international-year-of-the-salmon/about/main/data/IYS_events.csv") |> 
  filter(vessel_name_abbr %in% vessel,
         year %in% sampling_year,
         event_type %in% event_types) |> 
  rename("Vessel" = "vessel_name_abbr") |> 
  mutate(Vessel = ifelse(Vessel == "NW", "NW Explorer", Vessel),
         Vessel = ifelse(Vessel == "Raw_Spirit", "Raw Spirit", Vessel))

bathymetric_station_map <- 
  basemap(data = iys_data,  rotate = TRUE, bathymetry = TRUE,
          lon.interval = 3) +

  geom_spatial_point(data = iys_data, aes(x = longitude_start_decdeg,
                                          y = latitude_start_decdeg, 
                                          colour = Vessel,
                     size = I(4)))+
  annotation_scale(location = "br") + 
  annotation_north_arrow(location = "tr", which_north = "true") +
  xlab("Longitude") + 
  ylab("Latitude")

bathymetric_station_map +
  guides(fill = "none")
```

## 2022 Trawl Station Map Grey Bathymetry

```{r, warning = FALSE, message=FALSE, cache = TRUE, out.width = "100%", out.height = "100%"}
library(ggOceanMaps)
library(tidyverse)

# Edit which vessels, years, or sampling event types you would like to plot
vessel <- c("TINRO", "NW", "Shimada", "Franklin", "Kaganovsky", "Legacy", "Raw_Spirit")
sampling_year <- c(2022)
#event_types could include "Trawl", "CTD" or "CTD-Rosette", "Gillnet"
event_types <- c("Trawl", "Gillnet")

# Update IYS_events.csv with newest version from https://github.com/international-year-of-the-salmon/IYS-Integrated-Data-Collection
iys_data <- read_csv("https://raw.githubusercontent.com/international-year-of-the-salmon/about/main/data/IYS_events.csv") |> 
  filter(vessel_name_abbr %in% vessel,
         year %in% sampling_year,
         event_type %in% event_types) |> 
  rename("Vessel" = "vessel_name_abbr") |> 
  mutate(Vessel = ifelse(Vessel == "NW", "NW Explorer", Vessel),
         Vessel = ifelse(Vessel == "Raw_Spirit", "Raw Spirit", Vessel))

bathymetric_station_map <- 
  basemap(data = iys_data,  rotate = TRUE, bathymetry = TRUE, bathy.style = "poly_greys",
          lon.interval = 3) +
  geom_spatial_point(data = iys_data, aes(x = longitude_start_decdeg,
                                          y = latitude_start_decdeg, 
                                          colour = Vessel,
                     size = I(4)))+
  annotation_scale(location = "br") + 
  annotation_north_arrow(location = "tr", which_north = "true") +
  xlab("Longitude") + 
  ylab("Latitude")

bathymetric_station_map + guides(fill="none") # Removes bathymetry scale legend 
```

## 2022 Trawl Station Map Viridis Bathymetry

```{r, warning = FALSE, message=FALSE, cache = TRUE, out.width = "100%", out.height = "100%"}
library(ggOceanMaps)
library(tidyverse)

# Edit which vessels, years, or sampling event types you would like to plot
vessel <- c("TINRO", "NW", "Shimada", "Franklin", "Kaganovsky", "Legacy", "Raw_Spirit")
sampling_year <- c(2022)
#event_types could include "Trawl", "CTD" or "CTD-Rosette", "Gillnet"
event_types <- c("Trawl", "Gillnet")

# Update IYS_events.csv with newest version from https://github.com/international-year-of-the-salmon/IYS-Integrated-Data-Collection
iys_data <- read_csv("https://raw.githubusercontent.com/international-year-of-the-salmon/about/main/data/IYS_events.csv") |> 
  filter(vessel_name_abbr %in% vessel,
         year %in% sampling_year,
         event_type %in% event_types) |> 
  rename("Vessel" = "vessel_name_abbr") |> 
  mutate(Vessel = ifelse(Vessel == "NW", "NW Explorer", Vessel),
         Vessel = ifelse(Vessel == "Raw_Spirit", "Raw Spirit", Vessel))

bathymetric_station_map <- 
  basemap(data = iys_data,  rotate = TRUE, bathymetry = TRUE,
          lon.interval = 3) +
  geom_spatial_point(data = iys_data, aes(x = longitude_start_decdeg,
                                          y = latitude_start_decdeg, 
                                          colour = Vessel,
                     size = I(4)))+
  annotation_scale(location = "br") + 
  annotation_north_arrow(location = "tr", which_north = "true") +
  xlab("Longitude") + 
  ylab("Latitude") 

bathymetric_station_map +guides(fill="none") + # Removes bathymetry scale legend
  scale_fill_viridis_d()
```



# Global Ocean Physics Analysis {.tabset}

These models are courtesy of Tetjana Ross (Tetjana.Ross@dfo-mpo.gc.ca) from Fisheries and Oceans Canada. You must contact Tetjana and offer collaboration/co-authorship to use these images for publication.

## Mixed Layer Depth

<video autosize:true controls>
  <source src="images/mixed_layer_depth.ogg" type="video/ogg">
</video>

## Surface Currents

<video autosize:true controls>
  <source src="images/currents.ogg" type="video/ogg">
</video>

## Sea Surface Temperature

<video autosize:true controls>
  <source src="images/sst.ogg" type="video/ogg">
</video>

